<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions" template="/ui/plugin.html" xmlns:x="http://myfaces.apache.org/tomahawk">

    <ui:define name="breadcrumb">
        <h:commandLink value="#{msgs.startseite}" action="index" />
        <f:verbatim> &#8250;&#8250; </f:verbatim>
        <h:commandLink value="#{msgs.aktuelleSchritte}" action="#{AktuelleSchritteForm.paginator.returnToPreviousPage}" />
        <f:verbatim> &#8250;&#8250; </f:verbatim>
        <h:outputText value="#{AktuelleSchritteForm.mySchritt.prozess.titel}" />
    </ui:define>

    <ui:define name="title">
        <h3>
            <h:outputText value="#{msgs.ImageQAPlugin}" />
        </h3>
    </ui:define>

    <ui:define name="content">
 <style>
/* Thumbnails */
.goobi-thumbnail {
    float: left;
    min-width: 100px;
    min-height: 100px;
    margin: 0 7px 7px 0;
}

.goobi-thumbnail .goobi-thumbnail-image {
    float: left;
    width: 100%;
    min-height: 100px;
    overflow: hidden;    
}

.goobi-thumbnail .goobi-thumbnail-image a img {
    display: block;
    max-width: 100%;    
}

.goobi-thumbnail .goobi-thumbnail-caption {
    float: left;
    width: 100%;
    height: 20px;
    line-height: 20px;
}

</style>

        <h:form id="annotationform">

            <table cellpadding="3" cellspacing="0" width="100%" class="eingabeBoxen">

                <tr>
                    <td class="eingabeBoxen_row1" align="left">
                        <h:outputText id="id9" value="#{msgs.details}" />
                    </td>
                    <td class="eingabeBoxen_row1" align="right">
                        <h:commandLink id="id10" action="#{NavigationForm.Reload}">
                            <h:graphicImage id="id11" value="images/reload.gif" />
                        </h:commandLink>
                    </td>
                </tr>

                <!-- Formular für die Bearbeitung der Texte -->
                <tr>
                    <td class="eingabeBoxen_row2" style="width: 60%; vertical-align: top">

                        <ui:repeat var="image" value="#{AktuelleSchritteForm.myPlugin.paginatorList}">
                            <div class="goobi-thumbnail">
                                <div class="goobi-thumbnail-image">
                                    <h:commandLink title="#{image.tooltip}">

                                        <h:graphicImage value="#{image.thumbnailUrl}" title="#{image.tooltip}" />
                                        <x:updateActionListener value="#{image.order -1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                    </h:commandLink>
                                </div>
                                <div class="goobi-thumbnail-caption">
                                    <h:outputText value="#{image.imageName}"></h:outputText>
                                </div>
                            </div>
                        </ui:repeat>

                    </td>
                    <td class="eingabeBoxen_row2" style="vertical-align: top">
                        <h:panelGroup styleClass="div-image" layout="block">
                            <h:graphicImage value="#{AktuelleSchritteForm.myPlugin.bild}" rendered="#{AktuelleSchritteForm.myPlugin.image != null}" width="100%" />

                            <h:panelGroup layout="block" styleClass="center">

                                <h:commandLink title="#{msgs.firstImage}" styleClass="image-navigation">
                                    <h:graphicImage value="images/datascroller/arrow-first.gif" />
                                    <x:updateActionListener value="0" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                </h:commandLink>

                                <h:commandLink title="#{msgs.previousImage}" styleClass="image-navigation">
                                    <h:graphicImage value="images/datascroller/arrow-previous.gif" />
                                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex - 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                </h:commandLink>

                                <h:outputText value="#{AktuelleSchritteForm.myPlugin.imageIndex +1} / #{AktuelleSchritteForm.myPlugin.sizeOfImageList}" />

                                <h:commandLink title="#{msgs.nextImage}" styleClass="image-navigation">
                                    <h:graphicImage value="images/datascroller/arrow-next.gif" />
                                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.imageIndex + 1}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                </h:commandLink>

                                <h:commandLink title="#{msgs.lastImage}" styleClass="image-navigation">
                                    <h:graphicImage value="images/datascroller/arrow-last.gif" />
                                    <x:updateActionListener value="#{AktuelleSchritteForm.myPlugin.sizeOfImageList}" property="#{AktuelleSchritteForm.myPlugin.imageIndex}" />
                                </h:commandLink>

                            </h:panelGroup>
                        </h:panelGroup>
                    </td>

                </tr>

                <tr>
                    <td colspan="2" class="eingabeBoxen_row2">
                        <h:panelGroup>
                            <!-- erste und vorherige Seite -->
                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.cmdMoveFirst}" id="gofirst">
                                <h:graphicImage url="images/datascroller/arrow-first.gif" style="margin-right:4px;vertical-align: middle;" />
                            </h:commandLink>
                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.cmdMovePrevious}" id="goprevious">
                                <h:graphicImage url="images/datascroller/arrow-previous.gif" style="margin-right:4px;vertical-align: middle;" />
                            </h:commandLink>

                            <!-- aktuelle Seite anzeigen -->
                            <x:outputText id="txtMoveTo1" forceId="true" value="#{msgs.seite} #{AktuelleSchritteForm.myPlugin.pageNumberCurrent} #{msgs.von} #{AktuelleSchritteForm.myPlugin.pageNumberLast}" onclick="document.getElementById('txtMoveTo2').style.display='inline';
                   document.getElementById('txtMoveTo1').style.display='none'; 
                   document.getElementById('txtMoveTo2').focus();
                   document.getElementById('txtMoveTo2').select();" />

                            <!-- Seite direkt anspringen -->
                            <x:inputText id="txtMoveTo2" forceId="true" value="#{AktuelleSchritteForm.myPlugin.txtMoveTo}" style="display:none;font-size:9px;width:30px" required="true" onblur="document.getElementById('txtMoveTo2').style.display='none';
                     document.getElementById('txtMoveTo1').style.display='inline';" onkeypress="return submitEnter('cmdMoveTo',event)" />
                            <x:commandButton action="#{NavigationForm.Reload}" id="cmdMoveTo" forceId="true" value="go" style="display:none" />

                            <!-- nächste und letzte Seite -->
                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.cmdMoveNext}" id="gonext">
                                <h:graphicImage url="images/datascroller/arrow-next.gif" style="margin-left:4px;margin-right:4px;vertical-align: middle;" />
                            </h:commandLink>
                            <h:commandLink action="#{AktuelleSchritteForm.myPlugin.cmdMoveLast}" id="golast">
                                <h:graphicImage url="images/datascroller/arrow-last.gif" style="margin-right:4px;vertical-align: middle;" />
                            </h:commandLink>
                        </h:panelGroup>

                    </td>
                </tr>

                <tr>
                    <td class="eingabeBoxen_row3" colspan="2">
                        <h:commandButton value="#{msgs.quit}" action="#{AktuelleSchritteForm.myPlugin.cancel}" immediate="true" />
                    </td>
                </tr>
            </table>

        </h:form>

        <script type="text/javascript">
$( document ).ready(function() {
	var height = #{AktuelleSchritteForm.myPlugin.thumbnailSize};
	$('.goobi-thumbnail').css('max-width', height +  'px');
	$('.goobi-thumbnail').css('max-height', height + 20 + 'px');

	$('.goobi-thumbnail .goobi-thumbnail-image').css('max-height', height + 'px');

});
</script>

    </ui:define>

</ui:composition>